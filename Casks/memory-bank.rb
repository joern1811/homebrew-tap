# This file was generated by GoReleaser. DO NOT EDIT.
cask "memory-bank" do
  desc "Semantic memory management system for Claude Code using hexagonal architecture"
  homepage "https://github.com/joern1811/memory-bank"
  version "1.13.1"

  livecheck do
    skip "Auto-generated on release."
  end

  binary "memory-bank"

  on_macos do
    on_intel do
      url "https://github.com/joern1811/memory-bank/releases/download/v1.13.1/memory-bank_1.13.1_darwin_amd64.tar.gz"
      sha256 "37ccb0b7f7212ef1cbfa5c1c44e979dfc6c7c8cdcc3853a7d7b7884e4640e9ea"
    end
    on_arm do
      url "https://github.com/joern1811/memory-bank/releases/download/v1.13.1/memory-bank_1.13.1_darwin_arm64.tar.gz"
      sha256 "9bfa72923d855718e97e0a728c1c2ce8a9f2a930c1a6960a1f8129e920a95cf0"
    end
  end

  on_linux do
    on_intel do
      url "https://github.com/joern1811/memory-bank/releases/download/v1.13.1/memory-bank_1.13.1_linux_amd64.tar.gz"
      sha256 "a45819ee0771ee0d42641f919230f9621cc9a54e69fb72152bdafa2203a89578"
    end
    on_arm do
      url "https://github.com/joern1811/memory-bank/releases/download/v1.13.1/memory-bank_1.13.1_linux_arm64.tar.gz"
      sha256 "03fb0420ec6e48c4cc18312f2adcf21982f88d3f33c0f03763db8c1363934e5f"
    end
  end

  postflight do
    system_command "/usr/bin/xattr", args: ["-dr", "com.apple.quarantine", "#{staged_path}/memory-bank"]
    system "#{staged_path}/memory-bank completion bash > #{HOMEBREW_PREFIX}/etc/bash_completion.d/memory-bank"
    system "#{staged_path}/memory-bank completion zsh > #{HOMEBREW_PREFIX}/share/zsh/site-functions/_memory-bank"
    system "#{staged_path}/memory-bank completion fish > #{HOMEBREW_PREFIX}/share/fish/vendor_completions.d/memory-bank.fish"
  end

  caveats do
    "Memory Bank works out-of-the-box with mock providers, but for enhanced performance, "
    "consider installing these optional services:"
    ""
    "For local embedding generation:"
    "  brew install ollama"
    "  ollama pull nomic-embed-text"
    ""
    "For vector search performance:"
    "  # Option 1: Python package"
    "  pip install chromadb"
    ""
    "  # Option 2: uvx (no installation needed)"
    "  uvx --from 'chromadb[server]' chroma run --host localhost --port 8000"
    ""
    "  # Option 3: Docker"
    "  docker run -p 8000:8000 chromadb/chroma"
    ""
    "Start Memory Bank MCP server:"
    "  memory-bank"
  end

  # No zap stanza required
end
